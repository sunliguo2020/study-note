                                 设备分析：路由器的硬件结构讲解 

　路由器是一种连接多个网络或网段的网络设备，它能将不同网络或网段之间的数据信息进行“翻译”，以使它们能够相互“读”懂对方的数据，从而构成一个更大的网络。路由器由硬件和软件组成。硬件主要由中央处理器、内存、接口、控制端口等物理硬件和电路组成；软件主要由路由器的IOS操作系统组成。
　　
　　今天，我们以当前普遍应用的Cisco路由器为例给大家介绍一下路由器的硬件组成及其工作情况。让大家在使用它们的同时，对它们的组成也有所了解。
　　
　　中央处理器
　　
　　与计算机一样，路由器也包含了一个中央处理器（CPU）。不同系列和型号的路由器，其中的CPU也不尽相同。Cisco路由器一般采用Motorola 68030和Orion/R4600两种处理器。
　　
　　路由器的CPU负责路由器的配置管理和数据包的转发工作，如维护路由器所需的各种表格以及路由运算等。路由器对数据包的处理速度很大程度上取决于CPU的类型和性能。
　　
　　内存
　　
　　路由器采用了以下几种不同类型的内存，每种内存以不同方式协助路由器工作。
　　
　　1.只读内存（ROM）
　　
　　只读内存（ROM）在Cisco路由器中的功能与计算机中的ROM相似，主要用于系统初始化等功能。ROM中主要包含：
　　
　　（1）系统加电自检代码（POST），用于检测路由器中各硬件部分是否完好；
　　（2）系统引导区代码（BootStrap），用于启动路由器并载入IOS操作系统；
　　（3）备份的IOS操作系统，以便在原有IOS操作系统被删除或破坏时使用。通常，这个IOS比现运行IOS的版本低一些，但却足以使路由器启动和工作。
　　
　　顾名思义，ROM是只读存储器，不能修改其中存放的代码。如要进行升级，则要替换ROM芯片。
　　
　　2.闪存（Flash）
　　
　　闪存（Flash）是可读可写的存储器，在系统重新启动或关机之后仍能保存数据。Flash中存放着当前使用中的IOS。事实上，如果Flash容量足够大，甚至可以存放多个操作系统，这在进行IOS升级时十分有用。当不知道新版IOS是否稳定时，可在升级后仍保留旧版IOS，当出现问题时可迅速退回到旧版操作系统，从而避免长时间的网路故障。
　　
　　3.非易失性RAM(NVRAM)
　　
　　非易失性RAM(Nonvolatile RAM)是可读可写的存储器，在系统重新启动或关机之后仍能保存数据。由于NVRAM仅用于保存启动配置文件（Startup-Config），故其容量较小，通常在路由器上只配置32KB~128KB大小的NVRAM。同时，NVRAM的速度较快，成本也比较高。
　　
　　4.随机存储器(RAM)
　　
　　RAM也是可读可写的存储器，但它存储的内容在系统重启或关机后将被清除。和计算机中的RAM一样，Cisco路由器中的RAM也是运行期间暂时存放操作系统和数据的存储器，让路由器能迅速访问这些信息。RAM的存取速度优于前面所提到的3种内存的存取速度。
　　
　　运行期间，RAM中包含路由表项目、ARP缓冲项目、日志项目和队列中排队等待发送的分组。除此之外，还包括运行配置文件（Running-config）、正在执行的代码、IOS操作系统程序和一些临时数据信息。
　　
　　路由器的类型不同，IOS代码的读取方式也不同。如Cisco 2500系列路由器只在需要时才从Flash中读入部分IOS；而Cisco 4000系列路由器整个IOS必须先全部装入RAM才能运行。因此，前者称为Flash运行设备（Run from Flash），后者称为RAM运行设备（Run from RAM）。
　　
　　路由器加电启动过程：
　　
　　（1）系统硬件加电自检。运行ROM中的硬件检测程序，检测各组件能否正常工作。完成硬件检测后，开始软件初始化工作。
　　（2）软件初始化过程。运行ROM中的BootStrap程序，进行初步引导工作。
　　（3）寻找并载入IOS系统文件。IOS系统文件可以存放在多处，至于到底采用哪一个IOS，是通过命令设置指定的。
　　（4）IOS装载完毕，系统在NVRAM中搜索保存的Startup-Config文件，进行系统的配置。如果NVRAM中存在Startup-Config文件，则将该文件调入RAM中并逐条执行。否则，系统进入Setup模式，进行路由器初始配置。
　　
　　接口
　　
　　所有路由器都有接口（Interface），每个接口都有自己的名字和编号。一个接口的全名称由它的类型标志与数字编号构成，编号自0开始。
　　
　　对于接口固定的路由器（如Cisco 2500系列）或采用模块化接口的路由器（如Cisco 4700系列），在接口的全名称中，只采用一个数字，并根据它们在路由器的物理顺序进行编号，例如Ethernet0表示第1个以太网接口，Serial1表示第2个串口。
　　
　　对于支持“在线插拔和删除”或具有动态更改物理接口配置的路由器，其接口全名称中至少包含两个数字，中间用斜杠“/”分割。其中，第1个数字代表插槽编号，第2个数字代表接口卡内的端口编号。如Cisco 3600路由器中，serial3/0代表位于3号插槽上的第1个串口。
　　
　　对于支持“万用接口处理器（VIP）”的路由器，其接口编号形式为“插槽/端口适配器/端口号”，如Cisco 7500系列路由器中，Ethernet4/0/1是指4号插槽上第1个端口适配器的第2个以太网接口。
　　
　　控制台端口
　　
　　所有路由器都安装了控制台端口，使用户或管理员能够利用终端与路由器进行通信，完成路由器配置。该端口提供了一个EIA/TIA-232异步串行接口，用于在本地对路由器进行配置（首次配置必须通过控制台端口进行）。
　　
　　路由器的型号不同，与控制台进行连接的具体接口方式也不同，有些采用DB25连接器DB25F，有些采用RJ45连接器。通常，较小的路由器采用RJ45连接器，而较大的路由器采用DB25连接器。
　　
　　辅助端口
　　
　　多数路由器均配备了一个辅助端口，它与控制台端口类似，提供了一个EIA/TIA-232异步串行接口，通常用于连接Modem以使用户或管理员对路由器进行远程管理。 